/* Prelude  {{{1 */

:root {
  --scale-base: 1.125;
  --scale-expand-1: var(--scale-base);
  --scale-expand-2: calc(var(--scale-expand-1) * var(--scale-base));
  --scale-expand-3: calc(var(--scale-expand-2) * var(--scale-base));
  --scale-expand-4: calc(var(--scale-expand-3) * var(--scale-base));
  --scale-expand-5: calc(var(--scale-expand-4) * var(--scale-base));
  --scale-expand-6: calc(var(--scale-expand-5) * var(--scale-base));
  --scale-reduce-1: calc(var(--scale-base) / var(--scale-expand-2));
  --scale-reduce-2: calc(var(--scale-base) / var(--scale-expand-3));
  --scale-reduce-3: calc(var(--scale-base) / var(--scale-expand-4));
  --scale-reduce-4: calc(var(--scale-base) / var(--scale-expand-5));
  --scale-reduce-5: calc(var(--scale-base) / var(--scale-expand-6));
  --scale-reduce-6: calc(var(--scale-base) / var(--scale-expand-7));

  --text-large-1: calc(1rem * var(--scale-expand-1));
  --text-large-2: calc(1rem * var(--scale-expand-2));
  --text-large-3: calc(1rem * var(--scale-expand-3));
  --text-large-4: calc(1rem * var(--scale-expand-4));
  --text-large-5: calc(1rem * var(--scale-expand-5));
  --text-large-6: calc(1rem * var(--scale-expand-6));
  --text-small-1: calc(1rem * var(--scale-reduce-1));
  --text-small-2: calc(1rem * var(--scale-reduce-2));
  --text-small-3: calc(1rem * var(--scale-reduce-3));
  --text-small-4: calc(1rem * var(--scale-reduce-4));
  --text-small-5: calc(1rem * var(--scale-reduce-5));
  --text-small-6: calc(1rem * var(--scale-reduce-6));

  --text-width: 38ic;
  --vertical-rhythm: calc(1rem * var(--scale-expand-4));

  --font-text: Charter, Cambria, Times, 'YuMincho +36p Kana', YuMincho, 'Yu Mincho', 'Hiragino Mincho ProN', 'Noto Serif CJK JP', serif;
  --font-display: 'Helvetica Neue', Helvetica, Meiryo, 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', 'Noto Sans CJK JP', sans-serif;
  --font-code: 'PT Mono', Consolas, Courier, Meiryo, 'Hiragino Kaku Gothic ProN', 'Noto Sans CJK JP', monospace;

  --gray-1: #f5f6f7;
  --gray-2: #e8e9eb;
  --gray-3: #dadce0;
  --gray-4: #c3c9d6;
  --gray-5: #a1acc4;
  --gray-6: #8190b3;
  --gray-7: #5f719c;
  --gray-8: #455987;
  --gray-9: #2b3f6e;
  --gray-10: #12234d;
  --red-1: #fff0ed;
  --red-2: #ffe7e3;
  --red-3: #ffd1c9;
  --red-4: #fcb4a9;
  --red-5: #fa907f;
  --red-6: #f25d46;
  --red-7: #d1331b;
  --red-8: #a1220e;
  --red-9: #78190b;
  --red-10: #451008;
  --yellow-1: #fff5eb;
  --yellow-2: #fce7cf;
  --yellow-3: #fcd6a9;
  --yellow-4: #f7be7c;
  --yellow-5: #eb9e46;
  --yellow-6: #c97c24;
  --yellow-7: #a15f15;
  --yellow-8: #7d4a0f;
  --yellow-9: #57330a;
  --yellow-10: #331e07;
  --cyan-1: #e1fcfc;
  --cyan-2: #c0f8fa;
  --cyan-3: #7ceef2;
  --cyan-4: #4fdee3;
  --cyan-5: #31bfc4;
  --cyan-6: #1f9fa3;
  --cyan-7: #167e82;
  --cyan-8: #0f6163;
  --cyan-9: #0a4345;
  --cyan-10: #072a2b;
  --blue-1: #f0f4ff;
  --blue-2: #e0eaff;
  --blue-3: #ccdbff;
  --blue-4: #b3c9ff;
  --blue-5: #8badfc;
  --blue-6: #5f8dfa;
  --blue-7: #306bf2;
  --blue-8: #124edb;
  --blue-9: #0837a3;
  --blue-10: #071e52;
  --violet-1: #f7f2ff;
  --violet-2: #f0e8ff;
  --violet-3: #e4d4ff;
  --violet-4: #d3baff;
  --violet-5: #c09cff;
  --violet-6: #a877fc;
  --violet-7: #8848f7;
  --violet-8: #6f24f0;
  --violet-9: #4a08bd;
  --violet-10: #2b0769;
}

@property --floor {
  syntax: '<integer>';
  initial-value: 0;
  inherits: false;
}

/* Base  {{{1 */

html {
  font-family: var(--font-text);
  font-size: clamp(14px, calc(0.875rem + ((1vw - 3.2px) * 1.0989)), 18px);
  line-height: var(--vertical-rhythm);
  background-color: var(--red-1);
  color: var(--gray-10);
  touch-action: manipulation;
  -webkit-text-size-adjust: 100%;
}

body {
  margin: 0;
}

h1, h2, h3, h4, h5, h6 {
  --floor: calc((var(--scale) - 0.25) / 0.5 - 0.5);
  --line-scale: max(var(--floor) * 0.5, 1.0);
  margin-block: 0 var(--vertical-rhythm);
  line-height: calc(var(--vertical-rhythm) * var(--line-scale));
  font-family: var(--font-display);
  font-size: calc(1.0rem * var(--scale));
  font-feature-settings: 'palt';
  letter-spacing: -0.5px;
}

:not(:where(h1, h2, h3, h4, h5, h6)) + :is(h1, h2) {
  margin-block-start: calc(var(--vertical-rhythm) * 2);
}

h1 {
  --scale: var(--scale-expand-6);
}

h2 {
  --scale: var(--scale-expand-5);
}

h3 {
  --scale: var(--scale-expand-4);
}

h4 {
  --scale: var(--scale-expand-3);
}

h5 {
  --scale: var(--scale-expand-2);
}

h6 {
  --scale: var(--scale-expand-1);
}

iframe {
  border: 0;
}

blockquote, details, dl, figure, ol, p, pre, table, ul {
  margin-block: 0 var(--vertical-rhythm);
  margin-inline: 0;
}

hr {
  margin-block: 0 var(--vertical-rhythm);
  margin-inline: 0;
  border: 0;
  font-size: var(--text-large-2);
  line-height: calc(var(--vertical-rhythm) * 2);
  background-image: linear-gradient(to left, var(--gray-4), transparent),
                    linear-gradient(to right, var(--gray-4), transparent);
  background-position: left center, right center;
  background-size: calc(50% - 1.5ch) 2px;
  background-repeat: no-repeat;
}

hr::before {
  content: 'ยง';
  display: block;
  text-align: center;
  transform: rotate(20deg);
}

menu {
  list-style: none;
  margin: 0;
  padding: 0;
}

ol, ul {
  padding-inline-start: var(--vertical-rhythm);
}

figcaption {
  text-align: center;
  font-family: var(--font-display);
  font-weight: bold;
  font-size: var(--text-small-2);
}

table {
  border-collapse: collapse;
  border-spacing: 0;
  font: inherit;
  line-height: inherit;
  white-space: inherit;
}

th {
  text-align: left;
  font-family: var(--font-display);
}

small {
  font-size: var(--text-small-1);
}

em, strong {
  font-family: var(--font-display);
}

code, kbd, pre, samp {
  font-family: var(--font-code);
  font-size: var(--text-small-1);
}

a {
  color: var(--red-6);
  text-underline-offset: 2px;
}

:where(a[href]):hover {
  opacity: 0.6;
}

/* Layouts  {{{1 */

.l-header {
  background-color: var(--gray-10);
  color: var(--red-1);
}

.l-footer {
  padding-block: var(--vertical-rhythm);
}

.l-article-header {
  background-color: var(--red-3);
}

.l-container {
  margin-inline: auto;
  padding-inline: calc(var(--vertical-rhythm) / 2);
  padding-block: var(--vertical-rhythm);
  max-inline-size: var(--text-width);
}

/* Components  {{{1 */
/* .bordered  {{{2 */

.bordered {
  display: grid;
  align-items: center;
  grid-template-columns: var(--vertical-rhythm) auto minmax(var(--vertical-rhythm), 1fr);
  column-gap: 0.5ch;
}

.bordered::before,
.bordered::after {
  content: '';
  display: block;
  border-block-start: 6px double currentColor;
}

/* .figure  {{{2 */

.figure-body > a {
  display: block;
  padding: calc(var(--vertical-rhythm) / 2 - 2px);
  text-decoration: none;
  color: inherit;
  border: 1px solid var(--gray-6);
  border-radius: 4px;
  font-family: var(--font-display);
  font-weight: bold;
  opacity: inherit;
}

.figure-body > a:hover {
  background-color: var(--gray-2);
}

.figure-body > a[data-domain]::after {
  content: attr(data-domain);
  display: block;
  padding-inline-start: calc(16px + 0.5ch);
  font-size: var(--text-small-1);
  font-weight: normal;
  word-break: break-all;
  color: var(--gray-6);
  background-image: var(--favicon);
  background-repeat: no-repeat;
  background-size: 16px 16px;
  background-position: left center;
}

.figure-body > :is(img, svg) {
  display: block;
  margin-inline: auto;
  max-inline-size: 100%;
  block-size: auto;
}

.figure.is-code {
  position: relative;
}

.figure.is-code[data-language]::before {
  content: attr(data-language);
  position: absolute;
  inset-block-start: 0;
  inset-inline-end: calc(var(--vertical-rhythm) / 2);
  line-height: 1.0;
  padding-inline: 0.5ch;
  padding-block: 2px;
  background-color: var(--red-6);
  color: var(--red-1);
  font-family: var(--font-display);
  font-size: var(--text-small-2);
  border-end-start-radius:  4px;
  border-end-end-radius: 4px;
}

.figure-body > pre {
  padding: calc(var(--vertical-rhythm) / 2);
  margin-block-end: 0;
  border-radius: 4px;
  color: var(--blue-1);
  background-color: var(--gray-10);
  overflow-x: auto;
}

.figure-body > pre::-webkit-scrollbar {
  inline-size: calc(var(--vertical-rhythm) / 2);
  block-size: calc(var(--vertical-rhythm) / 2);
}

.figure-body > pre::-webkit-scrollbar-thumb {
  background-clip: padding-box;
  background-color: var(--gray-8);
  border: 4px solid transparent;
  border-radius: 6px;
}

.figure-body > blockquote {
  position: relative;
  margin-block-end: 0;
  padding-block: calc(var(--vertical-rhythm) / 2);
  padding-inline: calc(var(--vertical-rhythm) * 1.5);
  border-radius: 4px;
  background-color: var(--red-3);
}

.figure-body > blockquote::before,
.figure-body > blockquote::after {
  position: absolute;
  inline-size: calc(var(--vertical-rhythm) * 1.5);
  color: var(--red-6);
  font-size: var(--text-large-6);
  text-align: center;
}

.figure-body > blockquote::before {
  content: '\201c';
  inset-block-start: calc(var(--vertical-rhythm) / 2);
  inset-inline-start: 0;
  line-height: 1.0;
}

.figure-body > blockquote::after {
  content: '\201d';
  inset-block-end: calc(var(--vertical-rhythm) / 2);
  inset-inline-end: 0;
  line-height: 0;
}

.figure-body > blockquote > :last-child {
  margin-block-end: 0;
}

.figure.is-table > .figure-body {
  overflow-x: auto;
}

.figure-body > table {
  inline-size: 100%;
  margin-block-end: 0;
}

.figure-body > table > tr > :is(td, th),
.figure-body > table > :is(tbody, thead, tfoot) > tr > :is(td, th) {
  padding: calc(var(--vertical-rhythm) / 4);
  border-style: solid;
  border-color: currentColor;
  border-width: 0;
}

.figure-body > table > thead > tr > :is(td, th) {
  padding-block-end: calc(var(--vertical-rhythm) / 4 - 2px);
  border-block-end-width: 2px;
}

.figure-body > table > tr > :is(td, th),
.figure-body > table > tbody > tr > :is(td, th) {
  padding-block-end: calc(var(--vertical-rhythm) / 4 - 1px);
  border-block-end-width: 1px;
}

.figure-body > table > tfoot > tr > :is(td, th) {
  padding-block-start: calc(var(--vertical-rhythm) / 4 - 2px);
  border-block-start-width: 2px;
}

.figure-caption {
  color: var(--gray-8);
}

/* .introduction  {{{2 */

.introduction {
  font-family: var(--font-display);
}

.introduction-title {
  margin-block: 0;
}

/* .nav  {{{2 */

.nav-menu {
  display: flex;
  justify-content: flex-end;
  flex-wrap: wrap;
  font-family: var(--font-display);
  font-size: var(--text-large-1);
}

.nav-menu-item {
  display: flex;
}

.nav-menu-item + .nav-menu-item::before {
  content: '/';
  margin-inline: 0.5ch;
}

a.nav-menu-item-link {
  display: block;
  text-decoration: none;
  opacity: inherit;
}

a.nav-menu-item-link:hover {
  color: var(--blue-10);
  background-color: var(--red-6);
  opacity: inherit;
}

/* .note  {{{2 */

.note {
  padding: calc(var(--vertical-rhythm) / 2 - 2px);
  margin-block: 0 var(--vertical-rhythm);
  border: solid 2px currentColor;
  border-radius: 4px;
}

.note.is-note {
  background-color: var(--blue-2);
}

.note.is-warning {
  background-color: var(--yellow-2);
}

.note.is-callout {
  background-color: var(--red-2);
}

.note-caption {
  font-weight: bold;
  font-family: var(--font-display);
}

.note-body > :last-child {
  margin-block-end: 0;
}

/* .tag  {{{2 */

.tag-list {
  display: flex;
  column-gap: 0.5ch;
  row-gap: calc(var(--vertical-rhythm) / 4);
  justify-content: left;
  flex-wrap: wrap;
}

.tag {
  background-color: var(--gray-10);
  color: var(--red-3);
  padding-inline: 0.5ch;
}

a.tag {
  text-decoration: none;
  opacity: inherit;
}

a.tag:hover {
  background-color: var(--red-6);
}

/* .token  {{{2 */

.token.is-entity-name-type {
  color: var(--violet-5);
}

.token.is-comment {
  color: var(--gray-5);
  font-style: italic;
}

.token.is-support,
.token.is-entity-name-function {
  color: var(--yellow-5);
}

.token.is-string-quoted {
  color: var(--red-5);
}

.token.is-constant-numeric,
.token.is-constant-other,
.token.is-meta-attribute,
.token.is-punctuation-section-embedded {
  color: var(--cyan-5);
}

.token.is-keyword-control,
.token.is-keyword-operator,
.token.is-keyword-other,
.token.is-punctuation-definition-lifetime,
.token.is-punctuation-definition-template-expression,
.token.is-storage,
.token.is-variable-language {
  color: var(--blue-5);
}

/* Modules  {{{1 */
/* .article  {{{2 */

.article {
  counter-reset: h2;
}

.article p {
  text-align: justify;
  hyphens: auto;
}

.article :is(h1, h2) {
  position: relative;
}

.article h2::before {
  content: counter(h2) '. ';
  counter-increment: h2;
  counter-reset: h3;
}

.article h3::before {
  content: counter(h2) '.' counter(h3) '. ';
  counter-increment: h3;
}

.article :is(h1, h2)::after {
  content: '';
  position: absolute;
  inset-block-start: 50%;
  inset-inline-end: calc(100% + var(--vertical-rhythm) / 2);
  block-size: 4px;
  inline-size: 1ch;
  transform: translateY(-50%);
  background-color: var(--red-6);
}

/* .header  {{{2 */

.header-title {
  padding-block: calc(var(--vertical-rhythm) / 2) 0;
  border-block-width: 2px 2px;
  border-inline-width: 0;
  border-style: solid;
  border-color: currentColor;
  font-family: var(--font-display);
}

a.header-title {
  display: block;
  text-decoration: none;
  color: inherit;
  opacity: inherit;
}

.header-tagline {
  font-size: var(--text-small-1);
}

.header-title-logo {
  font-weight: 800;
  font-size: calc(min(100vw - var(--vertical-rhythm), var(--text-width)) / var(--letters));
  line-height: 1.0;
  text-align: justify;
  text-align-last: justify;
  white-space: nowrap;
}

.header-title-author {
  text-align: right;
  font-size: var(--text-small-1);
}

/* .footer  {{{2 */

.footer {
  font-family: var(--font-display);
}

.footer-copyright {
  text-align: center;
  font-size: var(--text-small-2);
}

/* __END__  {{{1
 * vim: foldmethod=marker
 */
